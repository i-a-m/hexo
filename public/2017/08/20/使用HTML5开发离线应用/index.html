<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>html5离线应用 | i@m</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/normalize.min.css"><link rel="stylesheet" type="text/css" href="/css/pure-min.css"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><script type="text/javascript" src="/js/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">html5离线应用</h1><a id="logo" href="/.">i@m</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">html5离线应用</h1><div class="post-meta">Aug 20, 2017<span> | </span><span class="category"><a href="/categories/html/">html</a></span><script src="/js/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><h1 id="使用-HTML5-开发离线应用"><a href="#使用-HTML5-开发离线应用" class="headerlink" title="使用 HTML5 开发离线应用"></a>使用 HTML5 开发离线应用</h1><p>Web2.0 技术鼓励个人的参与，每个人都是 Web 内容的撰写者。如果 Web 应用能够提供离线的功能，让用户在没有网络的地方（例如飞机上）和时候（网络坏了），也能进行内容撰写，等到有网络的时候，再同步到 Web 上，就大大方便了用户的使用。HTML5 作为新一代的 HTML 标准，包含了对离线功能的支持。本文介绍了 HTML5 离线功能中的离线资源缓存、在线状态检测、本地数据存储等内容，并举例说明了如何使用 HTML5 的新特性开发离线应用。</p>
<h2 id="HTML5-离线功能介绍"><a href="#HTML5-离线功能介绍" class="headerlink" title="HTML5 离线功能介绍"></a>HTML5 离线功能介绍</h2><p>HTML5 是目前正在讨论的新一代 HTML 标准，它代表了现在 Web 领域的最新发展方向。在 HTML5 标准中，加入了新的多样的内容描述标签，直接支持表单验证、视频音频标签、网页元素的拖拽、离线存储和工作线程等功能。其中一个新特性就是对离线应用开发的支持。</p>
<p>在开发支持离线的 Web 应用程序时，开发者通常需要使用以下三个方面的功能：</p>
<ol>
<li>离线资源缓存：需要一种方式来指明应用程序离线工作时所需的资源文件。这样，浏览器才能在在线状态时，把这些文件缓存到本地。此后，当用户离线访问应用程序时，这些资源文件会自动加载，从而让用户正常使用。HTML5 中，通过 cache manifest 文件指明需要缓存的资源，并支持自动和手动两种缓存更新方式。</li>
<li>在线状态检测：开发者需要知道浏览器是否在线，这样才能够针对在线或离线的状态，做出对应的处理。在 HTML5 中，提供了两种检测当前网络是否在线的方式。</li>
<li>本地数据存储：离线时，需要能够把数据存储到本地，以便在线时同步到服务器上。为了满足不同的存储需求，HTML5 提供了 DOM Storage 和 Web SQL Database 两种存储机制。前者提供了易用的 key/value 对存储方式，而后者提供了基本的关系数据库存储功能。</li>
</ol>
<p>尽管 HTML5 还处于草稿状态，但是各大主流浏览器都已经实现了其中的很多功能。Chrome、Firefox、Safari 和 Opera 的最新版本都对 HTML5 离线功能提供了完整的支持。IE8 也支持了其中的在线状态检测和 DOM Storage 功能。下面将具体介绍 HTML5 离线功能中的离线资源缓存、在线状态检测、DOM Storage 和 Web SQL Database，最后通过一个简单的 Web 程序说明使用 HTML5 开发离线应用的方法。</p>
<h2 id="离线资源缓存"><a href="#离线资源缓存" class="headerlink" title="离线资源缓存"></a>离线资源缓存</h2><p>为了能够让用户在离线状态下继续访问 Web 应用，开发者需要提供一个 cache manifest 文件。这个文件中列出了所有需要在离线状态下使用的资源，浏览器会把这些资源缓存到本地。本节先通过一个例子展示 cache manifest 文件的用途，然后详细描述其书写方法，最后说明缓存的更新方式。</p>
<h3 id="cache-manifest-示例"><a href="#cache-manifest-示例" class="headerlink" title="cache manifest 示例"></a>cache manifest 示例</h3><p>我们通过 W3C 提供的示例来说明。Clock Web 应用由三个文件“clock.html”、“clock.css”和“clock.js”组成。</p>
<h5 id="清单-1-Clock-应用代码"><a href="#清单-1-Clock-应用代码" class="headerlink" title="清单 1. Clock 应用代码"></a>清单 1. Clock 应用代码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;!-- clock.html --&gt;</div><div class="line">&lt;!DOCTYPE HTML&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line"> &lt;title&gt;Clock&lt;/title&gt;</div><div class="line"> &lt;script src=&quot;clock.js&quot;&gt;&lt;/script&gt;</div><div class="line"> &lt;link rel=&quot;stylesheet&quot; href=&quot;clock.css&quot;&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line"> &lt;p&gt;The time is: &lt;output id=&quot;clock&quot;&gt;&lt;/output&gt;&lt;/p&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line">/* clock.css */</div><div class="line">output &#123; font: 2em sans-serif; &#125;</div><div class="line"></div><div class="line">/* clock.js */</div><div class="line">setTimeout(function () &#123;</div><div class="line">   document.getElementById(&apos;clock&apos;).value = new Date();</div><div class="line">&#125;, 1000);</div></pre></td></tr></table></figure>
<p>当用户在离线状态下访问“clock.html”时，页面将无法展现。为了支持离线访问，开发者必须添加 cache manifest 文件，指明需要缓存的资源。这个例子中的 cache manifest 文件为“clock.manifest”，它声明了 3 个需要缓存的资源文件“clock.html”、“clock.css”和“clock.js”。</p>
<h5 id="清单-2-clock-manifest-代码"><a href="#清单-2-clock-manifest-代码" class="headerlink" title="清单 2. clock.manifest 代码"></a>清单 2. clock.manifest 代码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CACHE MANIFEST</div><div class="line">clock.html</div><div class="line">clock.css</div><div class="line">clock.js</div></pre></td></tr></table></figure>
<p>添加了 cache manifest 文件后，还需要修改“clock.html”，把 <html> 标签的 manifest 属性设置为“clock.manifest”。修改后的“clock.html”代码如下。</html></p>
<h5 id="清单-3-设置-manifest-后的-clock-html-代码"><a href="#清单-3-设置-manifest-后的-clock-html-代码" class="headerlink" title="清单 3. 设置 manifest 后的 clock.html 代码"></a>清单 3. 设置 manifest 后的 clock.html 代码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;!-- clock.html --&gt;</div><div class="line">&lt;!DOCTYPE HTML&gt;</div><div class="line">&lt;html manifest=&quot;clock.manifest&quot;&gt;</div><div class="line">&lt;head&gt;</div><div class="line"> &lt;title&gt;Clock&lt;/title&gt;</div><div class="line"> &lt;script src=&quot;clock.js&quot;&gt;&lt;/script&gt;</div><div class="line"> &lt;link rel=&quot;stylesheet&quot; href=&quot;clock.css&quot;&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line"> &lt;p&gt;The time is: &lt;output id=&quot;clock&quot;&gt;&lt;/output&gt;&lt;/p&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>修改后，当用户在线访问“clock.html”时，浏览器会缓存“clock.html”、“clock.css”和“clock.js”文件；而当用户离线访问时，这个 Web 应用也可以正常使用了。</p>
<h3 id="cache-manifest-格式"><a href="#cache-manifest-格式" class="headerlink" title="cache manifest 格式"></a>cache manifest 格式</h3><p>下面说明书写 cache manifest 文件需要遵循的格式。</p>
<ol>
<li>首行必须是 CACHE MANIFEST。</li>
<li>其后，每一行列出一个需要缓存的资源文件名。</li>
<li>可根据需要列出在线访问的白名单。白名单中的所有资源不会被缓存，在使用时将直接在线访问。声明白名单使用 NETWORK：标识符。</li>
<li>如果在白名单后还要补充需要缓存的资源，可以使用 CACHE：标识符。</li>
<li>如果要声明某 URI 不能访问时的替补 URI，可以使用 FALLBACK：标识符。其后的每一行包含两个 URI，当第一个 URI 不可访问时，浏览器将尝试使用第二个 URI。</li>
<li>注释要另起一行，以 # 号开头。</li>
</ol>
<p>清单 4 的代码中给出了 cache manifest 中各类标识符的使用示例。</p>
<h5 id="清单-4-cache-manifest-示例代码"><a href="#清单-4-cache-manifest-示例代码" class="headerlink" title="清单 4. cache manifest 示例代码"></a>清单 4. cache manifest 示例代码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">CACHE MANIFEST</div><div class="line"># 上一行是必须书写的。</div><div class="line"></div><div class="line">images/sound-icon.png</div><div class="line">images/background.png</div><div class="line"></div><div class="line">NETWORK:</div><div class="line">comm.cgi</div></pre></td></tr></table></figure>
<p># 下面是另一些需要缓存的资源，在这个示例中只有一个 css 文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CACHE:</div><div class="line">style/default.css</div><div class="line"></div><div class="line">FALLBACK:</div><div class="line">/files/projects /projects</div></pre></td></tr></table></figure>
<h3 id="更新缓存"><a href="#更新缓存" class="headerlink" title="更新缓存"></a>更新缓存</h3><p>应用程序可以等待浏览器自动更新缓存，也可以使用 Javascript 接口手动触发更新。</p>
<ol>
<li><p>自动更新</p>
<p>浏览器除了在第一次访问 Web 应用时缓存资源外，只会在 cache manifest 文件本身发生变化时更新缓存。而 cache manifest 中的资源文件发生变化并不会触发更新。</p>
</li>
<li><p>手动更新</p>
<p>开发者也可以使用 window.applicationCache 的接口更新缓存。方法是检测 window.applicationCache.status 的值，如果是 UPDATEREADY，那么可以调用 window.applicationCache.update() 更新缓存。示范代码如下。</p>
<h5 id="清单-5-手动更新缓存"><a href="#清单-5-手动更新缓存" class="headerlink" title="清单 5 手动更新缓存"></a>清单 5 手动更新缓存</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> if (window.applicationCache.status == window.applicationCache.UPDATEREADY)</div><div class="line">｛</div><div class="line"> window.applicationCache.update();</div><div class="line">｝</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="在线状态检测"><a href="#在线状态检测" class="headerlink" title="在线状态检测"></a>在线状态检测</h2><p>如果 Web 应用程序仅仅是一些静态页面的组合，那么通过 cache manifest 缓存资源文件以后，就可以支持离线访问了。但是随着互联网的发展，特别是 Web2.0 概念流行以来，用户的提交的数据渐渐成为互联网的主流。那么在开发支持离线的 Web 应用时，就不能仅仅满足于静态页面的展现，还必需考虑如何让用户在离线状态下也可以操作数据。离线状态时，把数据存储在本地；在线以后，再把数据同步到服务器上。为了做到这一点，开发者首先必须知道浏览器是否在线。HTML5 提供了两种检测是否在线的方式：navigator.online 和 online/offline 事件。</p>
<ol>
<li><p>navigator.onLine</p>
<p>navigator.onLine 属性表示当前是否在线。如果为 true, 表示在线；如果为 false, 表示离线。当网络状态发生变化时，navigator.onLine 的值也随之变化。开发者可以通过读取它的值获取网络状态。</p>
</li>
<li><p>online/offline 事件</p>
<p>当开发离线应用时，通过 navigator.onLine 获取网络状态通常是不够的。开发者还需要在网络状态发生变化时立刻得到通知，因此 HTML5 还提供了 online/offline 事件。当在线 / 离线状态切换时，online/offline 事件将触发在 body 元素上，并且沿着 document.body、document 和 window 的顺序冒泡。因此，开发者可以通过监听它们的 online/offline 事件来获悉网络状态。</p>
</li>
</ol>
<h2 id="DOM-Storage"><a href="#DOM-Storage" class="headerlink" title="DOM Storage"></a>DOM Storage</h2><p>在开发支持离线功能的 Web 应用时，开发者需要在本地存储数据。当前浏览器支持的 cookie 虽然也可以用来存储数据，但是 cookie 长度非常小（通常几 k），而且功能有限。因此，HTML5 中新引入了 DOM Storage 机制，用于存储 key/value 对，它的设计目标是提供大规模、安全且易用的存储功能。</p>
<h3 id="DOM-Storage-分类"><a href="#DOM-Storage-分类" class="headerlink" title="DOM Storage 分类"></a>DOM Storage 分类</h3><p>DOM Storage 分为两类：sessionStorage 和 localStorage。除了以下区别外，这两类存储对象的功能是完全一致的。</p>
<ol>
<li>sessionStorage 用于存储与当前浏览器窗口关联的数据。窗口关闭后，sessionStorage 中存储的数据将无法使用。</li>
<li>localStorage 用于长期存储数据。窗口关闭后，localStorage 中的数据仍然可以被访问。所有浏览器窗口可以共享 localStorage 的数据。</li>
</ol>
<h3 id="DOM-Storage-接口"><a href="#DOM-Storage-接口" class="headerlink" title="DOM Storage 接口"></a>DOM Storage 接口</h3><p>每一个 Storage 对象都可以存储一系列 key/value 对，Storage 接口定义为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">interface Storage &#123;</div><div class="line"> readonly attribute unsigned long length;</div><div class="line"> getter DOMString key(in unsigned long index);</div><div class="line"> getter any getItem(in DOMString key);</div><div class="line"> setter creator void setItem(in DOMString key, in any data);</div><div class="line"> deleter void removeItem(in DOMString key);</div><div class="line"> void clear();</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>其中最常用的接口是 getItem 和 setItem。getItem 用于获取指定 key 的 value，而 setItem 用于设置指定 key 的 value。</p>
<h3 id="DOM-Storage-示例"><a href="#DOM-Storage-示例" class="headerlink" title="DOM Storage 示例"></a>DOM Storage 示例</h3><p>这里给出一个使用了 sessionStorage 的例子，localStorage 的用法与它相同。首先使用 SetItem 添加了一个名为“userName”的项，它的值是“developerworks”。然后，调用 getItem 得到“userName”的值，并且弹出提示框显示它。最后，调用 removeItem 删除“userName”。</p>
<h5 id="清单-6-DOM-Storage-示例代码"><a href="#清单-6-DOM-Storage-示例代码" class="headerlink" title="清单 6 DOM Storage 示例代码"></a>清单 6 DOM Storage 示例代码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE HTML&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;script&gt;</div><div class="line">// 在 sessionStorage 中定义&apos;userName&apos;变量</div><div class="line">sessionStorage.setItem(&apos;userName&apos;, &apos;developerworks&apos;);</div><div class="line">// 访问&apos;userName&apos;变量</div><div class="line">alert(&quot;Your user is: &quot; + sessionStorage.getItem(&apos;userName&apos;));</div><div class="line">// 最后删除&apos;userName&apos;</div><div class="line">sessionStorage.removeItem(&apos;userName&apos;);</div><div class="line">&lt;/script&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h2 id="Web-SQL-Database"><a href="#Web-SQL-Database" class="headerlink" title="Web SQL Database"></a>Web SQL Database</h2><p>除了 DOM Storage 以外，HTML5 中还有另外一种数据存储方式 Web SQL Database。它提供了基本的关系数据库功能，支持页面上的复杂的、交互式的数据存储。它既可以用来存储用户产生的数据，也可以作为从服务器获取数据的本地高速缓存。例如可以把电子邮件、日程等数据存储到数据库中。Web SQL Database 支持数据库事务的概念，从而保证了即使多个浏览器窗口操作同一数据，也不会产生冲突。</p>
<h3 id="Web-SQL-Database-基本用法"><a href="#Web-SQL-Database-基本用法" class="headerlink" title="Web SQL Database 基本用法"></a>Web SQL Database 基本用法</h3><ol>
<li>创建和打开数据库</li>
</ol>
<p>使用数据库的第一步是创建并打开数据库，API 是 openDatabase。当数据库已经存在时，openDatabase 仅仅打开数据库；如果这个数据库不存在，那么就创建一个空数据库并且打开它。openDatabase 的定义是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Database openDatabase(in DOMString name, in DOMString version,</div><div class="line">in DOMString displayName, in unsigned long estimatedSize,</div><div class="line">in optional DatabaseCallback creationCallback);</div></pre></td></tr></table></figure>
<p>name：数据库名。</p>
<p>version：数据库版本。</p>
<p>displayName：显示名称。</p>
<p>estimatedSize：数据库预估长度（以字节为单位）。</p>
<p>creationCallback：回调函数。</p>
<ol>
<li><p>执行事务处理</p>
<p>在打开数据库以后，就可以使用事务 API transaction。每一个事务作为操作数据库的原子操作，不会被打断，从而避免了数据冲突。transaction 的定义是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">void transaction(in SQLTransactionCallback callback,</div><div class="line">in optional SQLTransactionErrorCallback errorCallback,</div><div class="line">in optional SQLVoidCallback successCallback);</div></pre></td></tr></table></figure>
<p>callback：事务回调函数，其中可以执行 SQL 语句。</p>
<p>errorCallback：出错回调函数。</p>
<p>successCallback：执行成功回调函数。</p>
</li>
<li><p>执行 SQL 语句</p>
<p>在事务的回调函数 callback 中，可以执行 SQL 语句，API 是 executeSQL。executeSQL 的定义是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">void executeSql(in DOMString sqlStatement,</div><div class="line">in optional ObjectArray arguments, in optional SQLStatementCallback callback,</div><div class="line">in optional SQLStatementErrorCallback errorCallback);</div></pre></td></tr></table></figure>
<p>sqlStatement：SQL 语句。</p>
<p>arguments：SQL 语句需要的参数。</p>
<p>callback：回调函数。</p>
<p>errorCallback：出错回调函数。</p>
</li>
</ol>
<h3 id="Web-SQL-Database-示例"><a href="#Web-SQL-Database-示例" class="headerlink" title="Web SQL Database 示例"></a>Web SQL Database 示例</h3><p>下面通过一个例子说明 Web SQL Database 的基本用法。它首先调用 openDatabase 创建了名为“fooDB”的数据库。然后使用 transaction 执行两条 SQL 语句。第一条 SQL 语句创建了名为“foo”的表，第二条 SQL 语句向表中插入一条记录。</p>
<h5 id="清单-7-Web-SQL-Database-示例代码"><a href="#清单-7-Web-SQL-Database-示例代码" class="headerlink" title="清单 7 Web SQL Database 示例代码"></a>清单 7 Web SQL Database 示例代码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var db = openDatabase(&apos;fooDB&apos;, &apos;1.0&apos;, &apos;fooDB&apos;, 2 * 1024);</div><div class="line">db.transaction(function (tx) &#123;</div><div class="line"> tx.executeSql(&apos;CREATE TABLE IF NOT EXISTS foo (id unique, text)&apos;);</div><div class="line"> tx.executeSql(&apos;INSERT INTO foo (id, text) VALUES (1, &quot;foobar&quot;)&apos;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="离线应用示例"><a href="#离线应用示例" class="headerlink" title="离线应用示例"></a>离线应用示例</h2><p>最后，通过一个例子来说明使用 HTML5 开发离线应用的基本方法。这个例子会用到前面提到的离线资源缓存、在线状态检测和 DOM Storage 等功能。假设我们开发一个便签管理的 Web 应用程序，用户可以在其中添加和删除便签。它支持离线功能，允许用户在离线状态下添加、删除便签，并且当在线以后能够同步到服务器上。</p>
<ol>
<li><p>应用程序页面</p>
<p>这个程序的界面很简单，如图 1 所示。用户点击“New Note”按钮可以在弹出框中创建新的便签，双击某便签就表示删除它。</p>
<h5 id="图-1-应用程序页面"><a href="#图-1-应用程序页面" class="headerlink" title="图 1. 应用程序页面"></a>图 1. 应用程序页面</h5><p>​</p>
<p>这个页面的源文件是 index.html，它的代码如清单 8 所示。</p>
<h5 id="清单-8-页面-HTML-代码"><a href="#清单-8-页面-HTML-代码" class="headerlink" title="清单 8 页面 HTML 代码"></a>清单 8 页面 HTML 代码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;html manifest=&quot;notes.manifest&quot;&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;server.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;data.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;UI.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;title&gt;Note List&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line"></div><div class="line">&lt;body onload = &quot;SyncWithServer()&quot;&gt;</div><div class="line">&lt;input type=&quot;button&quot; value=&quot;New Note&quot; onclick=&quot;newNote()&quot;&gt;</div><div class="line">&lt;ul id=&quot;list&quot;&gt;&lt;/ul&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>在 body 中声明了一个按钮和一个无序列表。当按下“New Note”按钮时，newNote 函数将被调用，它用来添加一条新的便签。而无序列表初始为空，它是用来显示便签的列表。</p>
</li>
<li><p>cache manifest 文件</p>
<p>定义 cache manifest 文件，声明需要缓存的资源。在这个例子中，需要缓存“index.html”、“server.js”、“data.js”和“UI.js”等 4 个文件。除了前面列出的“index.html”外，“server.js”、“data.js”和“UI.js”分别包含服务器相关、数据存储和用户界面代码。cache manifest 文件定义如下。</p>
<h5 id="清单-9-cache-manifest-文件"><a href="#清单-9-cache-manifest-文件" class="headerlink" title="清单 9 cache manifest 文件"></a>清单 9 cache manifest 文件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CACHE MANIFEST</div><div class="line">index.html</div><div class="line">server.js</div><div class="line">data.js</div><div class="line">UI.js</div></pre></td></tr></table></figure>
</li>
<li><p>用户界面代码</p>
<p>用户界面代码定义在 UI.js 中。</p>
<h5 id="清单-10-用户界面代码-UI-js"><a href="#清单-10-用户界面代码-UI-js" class="headerlink" title="清单 10 用户界面代码 UI.js"></a>清单 10 用户界面代码 UI.js</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">function newNote()</div><div class="line">&#123;</div><div class="line">   var title = window.prompt(&quot;New Note:&quot;);</div><div class="line">   if (title)</div><div class="line">   &#123;</div><div class="line">       add(title);</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function add(title)</div><div class="line">&#123;</div><div class="line">   // 在界面中添加</div><div class="line">   addUIItem(title);</div><div class="line">   // 在数据中添加</div><div class="line">   addDataItem(title);</div><div class="line">&#125;</div><div class="line"></div><div class="line">function remove(title)</div><div class="line">&#123;</div><div class="line">   // 从界面中删除</div><div class="line">   removeUIItem(title);</div><div class="line">   // 从数据中删除</div><div class="line">   removeDataItem(title);</div><div class="line">&#125;</div><div class="line"></div><div class="line">function addUIItem(title)</div><div class="line">&#123;</div><div class="line">   var item = document.createElement(&quot;li&quot;);</div><div class="line">   item.setAttribute(&quot;ondblclick&quot;, &quot;remove(&apos;&quot;+title+&quot;&apos;)&quot;);</div><div class="line">   item.innerHTML=title;</div><div class="line"></div><div class="line">   var list = document.getElementById(&quot;list&quot;);</div><div class="line">   list.appendChild(item);</div><div class="line">&#125;</div><div class="line"></div><div class="line">function removeUIItem(title)</div><div class="line">&#123;</div><div class="line">   var list = document.getElementById(&quot;list&quot;);</div><div class="line">   for (var i = 0; i &lt; list.children.length; i++) &#123;</div><div class="line">       if(list.children[i].innerHTML == title)</div><div class="line">       &#123;</div><div class="line">           list.removeChild(list.children[i]);</div><div class="line">       &#125;</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>UI.js 中的代码包含添加便签和删除便签的界面操作。</p>
<ul>
<li>添加便签</li>
</ul>
<ol>
<li>用户点击“New Note”按钮，newNote 函数被调用。</li>
<li>newNote 函数会弹出对话框，用户输入新便签内容。newNote 调用 add 函数。</li>
<li>add 函数分别调用 addUIItem 和 addDataItem 添加页面元素和数据。addDataItem 代码将在后面列出。</li>
<li>addUIItem 函数在页面列表中添加一项。并指明 ondblclick 事件的处理函数是 remove，使得双击操作可以删除便签。</li>
</ol>
<ul>
<li>删除便签</li>
</ul>
<ol>
<li>用户双击某便签时，调用 remove 函数。</li>
<li>remove 函数分别调用 removeUIItem 和 removeDataItem 删除页面元素和数据。removeDataItem 将在后面列出。</li>
<li>removeUIItem 函数删除页面列表中的相应项。</li>
</ol>
</li>
<li><p>数据存储代码</p>
<p>数据存储代码定义在 data.js 中。</p>
<h5 id="清单-11-数据存储代码-data-js"><a href="#清单-11-数据存储代码-data-js" class="headerlink" title="清单 11 数据存储代码 data.js"></a>清单 11 数据存储代码 data.js</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div></pre></td><td class="code"><pre><div class="line">var storage = window[&apos;localStorage&apos;];</div><div class="line"></div><div class="line">function addDataItem(title)</div><div class="line">&#123;</div><div class="line">   if (navigator.onLine) // 在线状态</div><div class="line">   &#123;</div><div class="line">       addServerItem(title);</div><div class="line">   &#125;</div><div class="line">   else // 离线状态</div><div class="line">   &#123;</div><div class="line">       var str = storage.getItem(&quot;toAdd&quot;);</div><div class="line">       if(str == null)</div><div class="line">       &#123;</div><div class="line">           str = title;</div><div class="line">       &#125;</div><div class="line">       else</div><div class="line">       &#123;</div><div class="line">           str = str + &quot;,&quot; + title;</div><div class="line">       &#125;</div><div class="line">       storage.setItem(&quot;toAdd&quot;, str);</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function removeDataItem(title)</div><div class="line">&#123;</div><div class="line">   if (navigator.onLine) // 在线状态</div><div class="line">   &#123;</div><div class="line">       removeServerItem(title);</div><div class="line">   &#125;</div><div class="line">   else // 离线状态</div><div class="line">   &#123;</div><div class="line">       var str = storage.getItem(&quot;toRemove&quot;);</div><div class="line">       if(str == null)</div><div class="line">       &#123;</div><div class="line">           str = title;</div><div class="line">       &#125;</div><div class="line">       else</div><div class="line">       &#123;</div><div class="line">           str = str + &quot;,&quot; + title;</div><div class="line">       &#125;</div><div class="line">       storage.setItem(&quot;toRemove&quot;, str);</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function SyncWithServer()</div><div class="line">&#123;</div><div class="line">   // 如果当前是离线状态，不需要做任何处理</div><div class="line">   if (navigator.onLine == false)return;</div><div class="line"></div><div class="line">   var i = 0;</div><div class="line">   // 和服务器同步添加操作</div><div class="line">   var str = storage.getItem(&quot;toAdd&quot;);</div><div class="line">   if(str != null)</div><div class="line">   &#123;</div><div class="line">       var addItems = str.split(&quot;,&quot;);</div><div class="line">       for(i = 0; i&lt;addItems.length; i++)</div><div class="line">       &#123;</div><div class="line">           addDataItem(addItems[i]);</div><div class="line">       &#125;</div><div class="line">       storage.removeItem(&quot;toAdd&quot;);</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   // 和服务器同步删除操作</div><div class="line">   str = storage.getItem(&quot;toRemove&quot;);</div><div class="line">   if(str != null)</div><div class="line">   &#123;</div><div class="line">       var removeItems = str.split(&quot;,&quot;);</div><div class="line">       for(i = 0; i&lt;removeItems.length; i++)</div><div class="line">       &#123;</div><div class="line">           removeDataItem(removeItems[i]);</div><div class="line">       &#125;</div><div class="line">       storage.removeItem(&quot;toRemove&quot;);</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   // 删除界面中的所有便签</div><div class="line">   var list = document.getElementById(&quot;list&quot;);</div><div class="line">   while(list.lastChild != list.firstElementChild)</div><div class="line">       list.removeChild(list.lastChild);</div><div class="line">   if(list.firstElementChild)</div><div class="line">       list.removeChild(list.firstElementChild);</div><div class="line"></div><div class="line">   // 从服务器获取全部便签，并显示在界面中</div><div class="line">   var allItems = getServerItems();</div><div class="line">   if(allItems != &quot;&quot;)</div><div class="line">   &#123;</div><div class="line">       var items = allItems.split(&quot;,&quot;);</div><div class="line">       for(i = 0; i&lt;items.length; i++)</div><div class="line">       &#123;</div><div class="line">           addUIItem(items[i]);</div><div class="line">       &#125;</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>window.addEventListener(“online”, SyncWithServer,false);</p>
<p>data.js 中的代码包含添加便签、删除便签和与服务器同步等数据操作。其中用到了 navigator.onLine 属性、online 事件、DOM Storage 等 HTML5 新功能。</p>
<ul>
<li>添加便签：addDataItem</li>
</ul>
<ol>
<li>通过 navigator.onLine 判断是否在线。</li>
<li>如果在线，那么调用 addServerItem 直接把数据存储到服务器上。addServerItem 将在后面列出。</li>
<li>如果离线，那么把数据添加到 localStorage 的“toAdd”项中。</li>
</ol>
<ul>
<li>删除便签：removeDataItem</li>
</ul>
<ol>
<li>通过 navigator.onLine 判断是否在线。</li>
<li>如果在线，那么调用 removeServerItem 直接在服务器上删除数据。removeServerItem 将在后面列出。</li>
<li>如果离线，那么把数据添加到 localStorage 的“toRemove”项中。</li>
</ol>
<ul>
<li>数据同步：SyncWithServer</li>
</ul>
<p>在 data.js 的最后一行，注册了 window 的 online 事件处理函数 SyncWithServer。当 online 事件发生时，SyncWithServer 将被调用。其功能如下。</p>
<ol>
<li>如果 navigator.onLine 表示当前离线，则不做任何操作。</li>
<li>把 localStorage 中“toAdd”项的所有数据添加到服务器上，并删除“toAdd”项。</li>
<li>把 localStorage 中“toRemove”项的所有数据从服务器中删除，并删除“toRemove”项。</li>
<li>删除当前页面列表中的所有便签。</li>
<li>调用 getServerItems 从服务器获取所有便签，并添加在页面列表中。getServerItems 将在后面列出。</li>
</ol>
</li>
<li><p>服务器相关代码</p>
<p>服务器相关代码定义在 server.js 中。</p>
<h5 id="清单-12-服务器相关代码-server-js"><a href="#清单-12-服务器相关代码-server-js" class="headerlink" title="清单 12 服务器相关代码 server.js"></a>清单 12 服务器相关代码 server.js</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">function addServerItem(title)</div><div class="line">&#123;</div><div class="line">   // 在服务器中添加一项</div><div class="line">&#125;</div><div class="line"></div><div class="line">function removeServerItem(title)</div><div class="line">&#123;</div><div class="line">   // 在服务器中删除一项</div><div class="line">&#125;</div><div class="line"></div><div class="line">function getServerItems()</div><div class="line">&#123;</div><div class="line">   // 返回服务器中存储的便签列表</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>由于这部分代码与服务器有关，这里只说明各个函数的功能，具体实现可以根据不同服务器编写代码。</p>
<ul>
<li>在服务器中添加一项：addServerItem</li>
<li>在服务器中删除一项：removeServerItem</li>
<li>返回服务器中存储的便签列表：getServerItems</li>
</ul>
</li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本文介绍了 HTML5 为了支持离线应用程序新增的强大功能。通过阅读本文，读者能够了解到 HTML5 中离线相关特性的基本用法，从而掌握利用 HTML5 开发 Web 离线应用的方法。</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://mpengju.com/2017/08/20/使用HTML5开发离线应用/" data-id="cj6m38khk008q9c63cpdg467n" class="article-share-link">分享</a><div class="tags"><a href="/tags/前端/">前端</a><a href="/tags/html/">html</a></div><div class="post-nav"><a href="/2017/08/20/使用python语言操作MongoDB/" class="pre">使用python语言操作MongoDB</a><a href="/2017/08/20/使用Arduino与L298N(红板)驱动直流电机/" class="next">使用Arduino与L298N(红板) 驱动直流电机</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://mpengju.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Arduino/">Arduino</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tomcat/">Tomcat</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/fedora/">fedora</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/github/">github</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/html/">html</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/raspberry-pi/">raspberry pi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/react/">react</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实验/">实验</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/树莓派/">树莓派</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/正则/">正则</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/移动端/">移动端</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Tomcat/" style="font-size: 15px;">Tomcat</a> <a href="/tags/前端/" style="font-size: 15px;">前端</a> <a href="/tags/正则表达式/" style="font-size: 15px;">正则表达式</a> <a href="/tags/webview/" style="font-size: 15px;">webview</a> <a href="/tags/h5/" style="font-size: 15px;">h5</a> <a href="/tags/Arduino/" style="font-size: 15px;">Arduino</a> <a href="/tags/控制器/" style="font-size: 15px;">控制器</a> <a href="/tags/舵机/" style="font-size: 15px;">舵机</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/服务器/" style="font-size: 15px;">服务器</a> <a href="/tags/Django/" style="font-size: 15px;">Django</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/Flask/" style="font-size: 15px;">Flask</a> <a href="/tags/html/" style="font-size: 15px;">html</a> <a href="/tags/数据库/" style="font-size: 15px;">数据库</a> <a href="/tags/机器学习/" style="font-size: 15px;">机器学习</a> <a href="/tags/前段/" style="font-size: 15px;">前段</a> <a href="/tags/fedora/" style="font-size: 15px;">fedora</a> <a href="/tags/SSH/" style="font-size: 15px;">SSH</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/php/" style="font-size: 15px;">php</a> <a href="/tags/mongodb/" style="font-size: 15px;">mongodb</a> <a href="/tags/代码块/" style="font-size: 15px;">代码块</a> <a href="/tags/SASS/" style="font-size: 15px;">SASS</a> <a href="/tags/nodejs/" style="font-size: 15px;">nodejs</a> <a href="/tags/ajax/" style="font-size: 15px;">ajax</a> <a href="/tags/上传/" style="font-size: 15px;">上传</a> <a href="/tags/vlc/" style="font-size: 15px;">vlc</a> <a href="/tags/转换/" style="font-size: 15px;">转换</a> <a href="/tags/清理垃圾/" style="font-size: 15px;">清理垃圾</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/github/" style="font-size: 15px;">github</a> <a href="/tags/域名/" style="font-size: 15px;">域名</a> <a href="/tags/树莓派/" style="font-size: 15px;">树莓派</a> <a href="/tags/物联网/" style="font-size: 15px;">物联网</a> <a href="/tags/远程登录/" style="font-size: 15px;">远程登录</a> <a href="/tags/存储/" style="font-size: 15px;">存储</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/主题/" style="font-size: 15px;">主题</a> <a href="/tags/命令/" style="font-size: 15px;">命令</a> <a href="/tags/jquery/" style="font-size: 15px;">jquery</a> <a href="/tags/jQuery/" style="font-size: 15px;">jQuery</a> <a href="/tags/less/" style="font-size: 15px;">less</a> <a href="/tags/格式化/" style="font-size: 15px;">格式化</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/npm/" style="font-size: 15px;">npm</a> <a href="/tags/卸载/" style="font-size: 15px;">卸载</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/邮件/" style="font-size: 15px;">邮件</a> <a href="/tags/直流电机/" style="font-size: 15px;">直流电机</a> <a href="/tags/react/" style="font-size: 15px;">react</a> <a href="/tags/语音聊天/" style="font-size: 15px;">语音聊天</a> <a href="/tags/移动端/" style="font-size: 15px;">移动端</a> <a href="/tags/WEB/" style="font-size: 15px;">WEB</a> <a href="/tags/兼容性/" style="font-size: 15px;">兼容性</a> <a href="/tags/人脸识别/" style="font-size: 15px;">人脸识别</a> <a href="/tags/正则/" style="font-size: 15px;">正则</a> <a href="/tags/显示器/" style="font-size: 15px;">显示器</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/08/21/CSS3为不同媒介设置样式的方法CSS3MediaQueries/">CSS3为不同媒介设置样式的方法（CSS3 Media Queries）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/21/Javascript 预览代码/">Javascript 预览代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/21/用 JavaScript 实现网页图片等比例缩放/">用 JavaScript 实现网页图片等比例缩放</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/21/Javascript 切换页面 CSS 样式/">Javascript 切换页面 CSS 样式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/21/Javascript 控制 CheckBox 的全选与取消全选/">Javascript 控制 CheckBox 的全选与取消全选</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/21/Javascript 获取链接(url)参数的方法/">Javascript 获取链接(url)参数的方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/21/用 Javascript 验证表单（form）中的单选（radio）值/">用 Javascript 验证表单（form）中的单选（radio）值</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/21/用 Javascript 验证表单（form）中多选框（checkbox）值/">用 Javascript 验证表单（form）中多选框（checkbox）值</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/21/用 Javascript 实现检测、添加、移除样式（className）/">用 Javascript 实现检测、添加、移除样式（className）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/21/Javascript 中阻止浏览器默认操作/">Javascript 中阻止浏览器默认操作</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://mpengju.com" title="i@m" target="_blank">i@m</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">i@m.</a> Powered by<a rel="nofollow" target="_blank"> Hexo.</a><a rel="nofollow" target="_blank"> Theme</a> by<a rel="nofollow" target="_blank" href="mailto:i@mpengju.com?subject=我是？&amp;body=很高兴认识你"> i@mpengju.com</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>