---
title: Arduino控制MG995
tags: [Arduino,舵机,]
categories: Arduino
---

 舵机是一种位置伺服的驱动器（如图4-17-1所示），主要是由外壳、电路板、无核心马达、齿轮与位置检测器所构成。其工作原理是由接收机或者单片机发出信号给舵机，其内部有一个基准电路，产生周期为20ms，宽度为1.5ms 的基准信号，将获得的直流偏置电压与电位器的电压比较，获得电压差输出。经由电路板上的IC 判断转动方向，再驱动无核心马达开始转动，透过减速齿轮将动力传至摆臂，同时由位置检测器送回信号，判断是否已经到达定位。适用于那些需要角度不断变化并可以保持的控制系统。当电机转速一定时，通过级联减速齿轮带动电位器旋转，使得电压差为0，电机停止转动。一般舵机旋转的角度范围是0 度到180 度。

![img](http://www.landzo.cn/forum.php?mod=attachment&aid=MTMzNjl8ZTU2ZjM0MTJ8MTUwMTc1NTg5N3wwfDExOTg4)

​                              

**图****4-17-1  ****舵机实物图**

 

1实验原理

舵机有很多规格，但所有的舵机都有外接三根线，分别用棕、红、橙三种颜色进行区分，由于舵机品牌不同，颜色也会有所差异，棕色为接地线，红色为电源正极线，橙色为信号线。

![img](http://www.landzo.cn/forum.php?mod=attachment&aid=MTMzNzB8YjAzODM2MTB8MTUwMTc1NTg5N3wwfDExOTg4)

 

舵机的转动的角度是通过调节PWM（脉冲宽度调制）信号的占空比来实现的，标准PWM（脉冲宽度调制）信号的周期固定为20ms（50Hz），理论上脉宽分布应在1ms到2ms 之间，但是，事实上脉宽可由0.5ms 到2.5ms 之间，脉宽和舵机的转角0°～180°相对应。有一点值得注意的地方，由于舵机牌子不同，对于同一信号，不同牌子的舵机旋转的角度也会有所不同。

![img](http://www.landzo.cn/forum.php?mod=attachment&aid=MTMzNzF8ODQ3YjkzYjB8MTUwMTc1NTg5N3wwfDExOTg4)

 

用Arduino 控制舵机的方法有两种，一种是通过Arduino 的普通数字传感器接口产生占空比不同的方波，模拟产生PWM 信号进行舵机定位，第二种是直接利用Arduino 自带的Servo 函数进行舵机的控制，这种控制方法的优点在于程序编写，缺点是只能控制2 路舵机，因为Arduino 自带函数只能利用数字9、10 接口。Arduino 的驱动能力有限，所以当需要控制1 个以上的舵机时需要外接电源，实验连接线如图4-17-2所示。

 

2硬件电路

舵机控制实验器件表参考表4-17-2。

 

| 实验器件           | 数量   |
| -------------- | ---- |
| landzoduino开发板 | 1    |
| 编程线            | 1    |
| 杜邦线            | 若干   |
| 面包板            | 1    |
| 舵机             | 1    |

**图****4-17-2 ****舵机控制实验器件表**

舵机控制实验电路参考图4-17-3。

 ![img](http://www.landzo.cn/forum.php?mod=attachment&aid=MTMzNzJ8NWRjNmExMmZ8MTUwMTc1NTg5N3wwfDExOTg4)

 

**图****4-17-3  ****舵机控制实验电路图**

 

3程序设计

将舵机接数字 9 接口上。

编写一个程序让舵机转动到用户输入数字所对应的角度数的位置，并将角度打印显示到屏幕上。

参考源程序

```
    /****************************************************
      舵机控制实验程序
      舵机连续左右摆动近180度
      http://www.landzo.com/
      This example code is in the public domain.
    ****************************************************/
    #include <Servo.h>
    // 定义舵机对象，最多八个
    Servo myservo;   
    // 定义舵机转动位置
    int pos = 0;   
    /****************************************************
                初始化部分_setup()函数
    ****************************************************/
    void setup()
    {
        // 设置舵机控制针脚
        myservo.attach(9);  
    }
    /****************************************************
                执行部分_loop()函数
    ****************************************************/
    void loop()
    {
        // 0到180旋转舵机，每次延时15毫秒
        for(pos = 0; pos < 180; pos += 1)  
       {  
          myservo.write(pos);  
          delay(15);
        }
        // 180到0旋转舵机，每次延时15毫秒
        for(pos = 180; pos>=1; pos-=1)
        {                              
          myservo.write(pos);
          delay(15);
        }
    }

```

4实验操作

1)   按照图4-17-3将电路连接到landzoduino开发板上。

2)   插上编程线，把程序下载到Landzoduino控制板。插上SG90舵机，VCC5V插在舵机上的红线，GND插上舵机的棕线，橘黄信号线插在数字口9引脚上。

3)   观察运行情况。

 

5实验结果

   上载到Arduino后，可以看到，舵机开始先按0到180运转，然后再从180到0运转。通过舵机控制实验，成功的控制了舵机的转动。熟悉了PWM控制的使用。